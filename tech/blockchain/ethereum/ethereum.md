# Ethereum

## Basics - Ethereum is a platform that enables open access to digital money and data for anyone with an internet connection.
* Nodes speak JSON-RPC
```
// example json-rpc call 
{"jsonrpc":"2.0","method":"eth_sendTransaction","params":[{"from":"0xb60e8dd61c5d32be8058bb8eb970870f07233155","to":"0xd46e8dd67c5d32be8058bb8eb970870f07244567","gas":"0x76c0","gasPrice":"0x9184e72a000","value":"0x9184e72a","data":"0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675"}],"id":1}
```
* wei - smallest unit of Ether 10**18 wei in 1 Ether
* Reads cost a little, writes cost a lot
* Has 2 types of accts, Externally Owned (EOA) and Contract
  * Externally Owned: 
    * 20 byte address generated by a private key
    * state properties: 
      * nonce - counter that shows how many txs have been sent from the account
      * balance - number of wei owned by the address
      * codeHash -  this hash refers to the code of an account on the Ethereum virtual machine (EVM). Contract accounts have code fragments programmed in that can perform different operations. This EVM code gets executed if the account gets a message call. It cannot be changed unlike the other account fields. All such code fragments are contained in the state database under their corresponding hashes for later retrieval. This hash value is known as a codeHash. For externally owned accounts, the codeHash field is the hash of an empty string.
      * storageRoot - 
  * Contract Account:
    * Created with a corresponding deployed contract
    * Contract: 
      * Solidity (or something else) compiled down to bytecode
* Tx structure
  * From - 20 byte address originating acct
  * To: 20 byte adress (optional)
  * Value: Amount of fund in wei (1 eth = 10^18 wei)
    * If To is an EOA then its a fund transfer
    * If To is a Contract Address then its a fund transfer to deployed contract
  * Data/Input: Used mainly for contract activities
    * For new deployments, its the bytecode and encoded args
    * For execution of contract func, it contains func sig and the encoeded args. 
    * Empty for fund transfer
  * Gas Price: amt in wei per gas unit. Units of gas represent computational steps
  * Gas Limit: max gas units spent for this transaction
* Tx types
  * Fund Transfer between EOA
  * Deploy a contract on ETH network
  * Execute a function on a deployed contract

## Private Ethereum Networks
* [Quorum](https://consensys.net/quorum/)

## Test Networks
* Ropsten: The official test network, created by The Ethereum Foundation. Its functionality is similar to the MainNet.
* Kovan: A network that uses a consensus method called "proof-of-authority". This means its transactions are validated by select members, leading to a consistent four second block time. The supply of ether on this testnet is also controlled to mitigate spam attacks.
* Rinkeby: A testnet also using proof-of-authority, created by The Ethereum Foundation.

## Tokens 
  * A token is essentially a smart contract that implements a standard set of functions that keep track of balances and allow for transfer to/from other users.
    * For ERC20 (tokens that are used like money and are divisible so can trade fractions of them) tokens they implement: 
      * function transferFrom(address _from, address _to, uint256 _tokenId)
      * function balanceOf(address _owner)
      * mapping(address => uint256) balances;
    * For ERC721 (tokens that are not divisible.  can only trade in whole units and each one has a unique id) tokens they implement: 
      * event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);
      * event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);
      * function balanceOf(address _owner) external view returns (uint256);
      * function ownerOf(uint256 _tokenId) external view returns (address);
      * function transferFrom(address _from, address _to, uint256 _tokenId) external payable;
      * function approve(address _approved, uint256 _tokenId) external payable;


**When to use**
* To ensure that you are using the Ethereum blockchain for the right use case, there are a few factors to guide your decision-making. These factors include:
    * the number of participants in your system
    * the geographical distribution of users of your system
    * your performance requirements

